<nav class="navbar">
  <div class="nav-container">
    <a routerLink="/" class="logo">
      <h2>Chirimoyo 33</h2>
    </a>
    
    <ul class="nav-links">
      <li><a routerLink="/" routerLinkActive="active" [routerLinkActiveOptions]="{exact: true}">Hem</a></li>
      <li><a routerLink="/calendar" routerLinkActive="active">TillgÃ¤nglighet</a></li>
      <li><a routerLink="/booking" routerLinkActive="active">Boka nu</a></li>
      
      @if (currentUser$ | async; as user) {
        <li class="user-profile">
          <button class="profile-button" (click)="toggleDropdown()">
            @if (user.photoURL) {
              <img [src]="user.photoURL" [alt]="user.displayName || 'User'" class="user-avatar">
            } @else {
              <div class="user-avatar-placeholder">
                {{ (user.displayName || user.email || 'U')[0].toUpperCase() }}
              </div>
            }
            <span class="user-name">{{ user.displayName || user.email }}</span>
            <span class="dropdown-arrow">â–¾</span>
          </button>
          @if (dropdownOpen) {
            <div class="dropdown-menu">
              @if (user.role === 'admin') {
                <a routerLink="/admin" (click)="closeDropdown()" class="dropdown-item">
                  <span class="dropdown-icon">âš™ï¸</span>
                  Adminpanel
                </a>
                <div class="dropdown-divider"></div>
              }
              <button (click)="logout()" class="dropdown-item logout-item">
                <span class="dropdown-icon">ğŸšª</span>
                Logga ut
              </button>
            </div>
          }
        </li>
      } @else {
        <li><a routerLink="/login" routerLinkActive="active" class="btn-login">Logga in</a></li>
      }
    </ul>
    
    <button class="theme-toggle" (click)="toggleTheme()" [attr.aria-label]="isDarkMode ? 'Byt till ljust lÃ¤ge' : 'Byt till mÃ¶rkt lÃ¤ge'">
      @if (isDarkMode) {
        <span class="theme-icon">â˜€ï¸</span>
      } @else {
        <span class="theme-icon">ğŸŒ™</span>
      }
    </button>
  </div>
</nav>
